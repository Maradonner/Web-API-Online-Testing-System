@model TriviaQuestionDTO
@{
    var countId = 0;
}
@{
    ViewData["Title"] = "Create";
}

<div class="row text">
    <div class="col-md-8 offset-2">
        <p>
            <h1>Add a new actor</h1>
        </p>
        <div class="row">
            <div class="col-md-8 offset-2">
                <form asp-action="Form">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        <table id="tb">
                             <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                                <div class="form-group">
                                <label asp-for="Title" class="control-label"></label>
                                <input asp-for="Title" class="form-control" />
                                <span asp-validation-for="Title" class="text-danger"></span>
                             </div>

                            @{
                                for (var itemCount = 0; itemCount < 3; itemCount++)
                                {
                                                    <tr id="trs" :key="index">
                                                        <td x-text="index + 1"></td>
                                                        <td>@(++countId)</td>
                                                        <td><input asp-for='@Model.Options[itemCount].Title' class='form-control' /></td>
                                                        <td><input id="btnDelete" value="Delete" type="button" class="btn btn-info" onclick="btnDeleteClick(this)" /></td>
                                                    </tr>
                                }
                            }
                        </table>

                    <input id="btnAdd" value="Add" type="button" class="btn btn-primary" onclick="btnAddClick()">

                    <div class="form-group">
                        <input type="submit" value="Create" class="btn btn-outline-success float-right" />
                        <a class="btn btn-outline-secondary" asp-action="Index"> Show All</a>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>



    @section scripts{
    <script src="~/js/jquery-3.4.1/jquery-3.4.1.js" type="text/javascript"></script>
    <script src="~/js/jquery-3.4.1/jquery-ui-1.12.1.js" type="text/javascript"></script>
    <script src="~/js/jquery-3.4.1/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
    <script>
        var btnAddClick = function () {
            var trLen = $("#tb tr[id='trs']").length;
            var $lastTr = $("#tb tr[id='trs']").last();
            var tr = "<tr id='trs'>";
            tr += "<td>" + (trLen + 1) + "</td>";
            tr += "<td><input class='form-control' type='text' data-val='true' data-val-required='The Amount field is required.' id='Options_" + trLen + "__Title' name='Options[" + trLen + "].Title' value=''></td>";
            tr += "</tr>";
            $(tr).insertAfter($lastTr);
        }


        function btnDeleteClick(object){
            object.parentNode.parentNode.remove();
        @{
            countId--;
        } 
        }
        

    </script>
}